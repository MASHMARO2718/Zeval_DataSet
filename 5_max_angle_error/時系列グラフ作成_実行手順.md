# 時系列誤差グラフ作成スクリプト - 実行手順

## 作成されたファイル

### calicuration/Y=0.5,1.5/
- `plot_time_series_error.py` - メインスクリプト
- `run_plot.py` - 実行用ラッパースクリプト

### caliculation/Y=1.0.2.0/
- 同じスクリプトをコピー予定

## 実行方法

### 方法1: ラッパースクリプトを使用（推奨）

```bash
# Y=0.5,1.5 ディレクトリで実行
cd "C:\projects\MOTIONTRACK\Zeval_DataSet\5_max_angle_error\calicuration\Y=0.5,1.5"
python run_plot.py
```

```bash
# Y=1.0.2.0 ディレクトリで実行
cd "C:\projects\MOTIONTRACK\Zeval_DataSet\5_max_angle_error\calicuration\Y=1.0.2.0"
python run_plot.py
```

### 方法2: 直接コマンドライン引数で実行

```bash
cd "C:\projects\MOTIONTRACK\Zeval_DataSet\5_max_angle_error\calicuration\Y=0.5,1.5"
python plot_time_series_error.py \
  --mp_csv "CapturedFrames_*.csv" \
  --gt_csv "..\..\..\synced_joint_positions.csv" \
  --output_dir "graphs"
```

## 出力

### 生成されるファイル
- **グラフ数**: 288座標 × 8関節 = 2,304個のPNGファイル
- **保存場所**: `graphs/` ディレクトリ
- **ファイル名形式**: `CapturedFrames_X_Y_Z_関節名.png`

例:
- `CapturedFrames_-1.0_0.5_-3.0_L_Elbow.png`
- `CapturedFrames_-1.0_0.5_-3.0_R_Knee.png`

### グラフの内容
各グラフには以下の情報が含まれます:
- X軸: フレームID（時間軸）
- Y軸: 角度誤差（度）
- タイトル: カメラ座標と関節名
- 統計情報: 平均誤差、最大誤差
- 最大誤差発生フレームの赤いマーカー

## 処理時間の目安
- 1座標あたり: 約8秒（8関節）
- 288座標: 約38分

## トラブルシューティング

### エラー: CSVファイルが見つかりません
- CSVファイルが `calicuration/Y=0.5,1.5/` ディレクトリにあることを確認
- 290個の `CapturedFrames_*.csv` ファイルが必要

### エラー: Ground Truth CSVが見つかりません  
- `synced_joint_positions.csv` が以下の場所にあることを確認:
  - `C:\projects\MOTIONTRACK\Zeval_DataSet\synced_joint_positions.csv`

### エラー: matplotlibがインストールされていません
```bash
pip install matplotlib pandas numpy
```

## スクリプトの説明

### plot_time_series_error.py
メインスクリプト。以下の機能を提供:
- MediaPipeとGround TruthのCSV読み込み
- フレームごとの角度誤差計算
- 時系列グラフの作成と保存

### run_plot.py
ラッパースクリプト。以下を自動化:
- CSVファイルの検索
- Ground Truthパスの設定
- スクリプトの実行

## 次のステップ

1. Y=0.5,1.5ディレクトリで実行:
   ```bash
   cd "C:\projects\MOTIONTRACK\Zeval_DataSet\5_max_angle_error\calicuration\Y=0.5,1.5"
   python run_plot.py
   ```

2. Y=1.0.2.0ディレクトリで実行:
   ```bash
   cd "C:\projects\MOTIONTRACK\Zeval_DataSet\5_max_angle_error\calicuration\Y=1.0.2.0"
   python run_plot.py
   ```

3. 生成されたグラフを確認:
   - `calicuration/Y=0.5,1.5/graphs/`
   - `calicuration/Y=1.0.2.0/graphs/`


